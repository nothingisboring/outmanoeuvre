<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conceits</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
        }

        header {
            margin-bottom: 2rem;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin: 0;
            font-size: 2.25rem;
            font-weight: 800;
            letter-spacing: -0.05em;
        }

        .game-container {
            width: 100%;
            max-width: 600px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .info-container {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            color: #7f8c8d;
        }

        .info-box {
            padding: 0.75rem 1.25rem;
            background-color: #fff;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            min-width: 100px;
            text-align: center;
        }

        .clue-container {
            width: 100%;
            padding: 1.25rem;
            margin-bottom: 1.5rem;
            background-color: #fff;
            border-radius: 0.75rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            transition: background-color 0.5s ease;
        }

        .clue-container.new-clue {
            background-color: #e8f6ff;
        }

        .clue-label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #34495e;
            font-size: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .oeuvre-type {
            font-size: 1.5rem;
            margin-left: 0.5rem;
        }

        .clue-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
            text-align: center;
            padding: 0.5rem;
            letter-spacing: -0.02em;
            min-height: 2.5em;
        }

        /* Add to your existing CSS */
.guess-section {
    width: 100%;
    max-width: 600px;
    background-color: #fff;
    border-radius: 0.75rem;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    padding: 1.25rem;
    margin-top: 1rem;
}

.guess-container {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 1.25rem;  /* Increased from 1rem */
    align-items: center;
    margin-top: 0.75rem;  /* Add some space after the label */
    margin-bottom: 1rem;

}

.guess-container {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
    margin-bottom: 1rem;
}

.guess-row {
    display: flex;
    gap: 0.5rem;
    justify-content: center;
    flex-wrap: wrap;
}

 .correct-letter {
        background-color: #d4edda;
        color: #155724;
        border-color: #c3e6cb;
        font-weight: bold;
    }

.guess-label {
    margin-bottom: 1.25rem;  /* Increased from default */
    font-weight: 600;
    color: #34495e;
    font-size: 1rem;
}    

.submit-button {
    margin: 1rem auto 0;
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    font-weight: 600;
    background-color: #3498db;
    color: white;
    border: none;
    border-radius: 0.5rem;
    cursor: pointer;
    transition: all 0.2s ease;
    display: block;
    width: fit-content;
}

.submit-button:hover {
    background-color: #2980b9;
    transform: scale(1.05);
}
        
.letter-input {
    width: 2.5rem;
    height: 2.5rem;
    text-align: center;
    font-size: 1.5rem;
    font-weight: 600;
    text-transform: uppercase;
    border: 2px solid #bdc3c7;
    border-radius: 0.5rem;
    background-color: #fff;
    color: #2c3e50;
    transition: all 0.2s ease;
    padding: 0;
}



/* Mobile responsive styles */
@media (max-width: 480px) {
    .info-container {
        flex-wrap: wrap;
        gap: 0.5rem;
    }

    .info-box {
        flex: 1 1 auto;
        min-width: 80px;
        font-size: 0.8rem;
        padding: 0.5rem 0.75rem;
    }

    .guess-section {
        padding: 1rem;
    }

    .letter-input {
        width: 2rem;
        height: 2rem;
        font-size: 1.2rem;
    }

    .clue-text {
        font-size: 1rem;
    }

    .guess-label {
        font-size: 0.9rem;
    }

    .submit-button {
        padding: 0.6rem 1rem;
        font-size: 0.9rem;
    }
}

/* Larger mobile devices */
@media (min-width: 481px) and (max-width: 768px) {
    .letter-input {
        width: 2.25rem;
        height: 2.25rem;
        font-size: 1.3rem;
    }
}

/* Additional helper classes */
.spacer {
    height: 0.5rem;
}

        .button-container {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
            width: 100%;
        }

        .action-button {
            padding: 0.6rem 1.25rem;
            font-size: 0.9rem;
            font-weight: 600;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .action-button:hover {
            background-color: #2980b9;
            transform: scale(1.05);
        }

        /* Keep existing modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fff;
            color: #2c3e50;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 8px 15px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .submit-button {
            margin-top: 1rem;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            flex-direction: column;
            align-items: center;
        }

        .submit-button:hover {
            background-color: #2980b9;
            transform: scale(1.05);
            flex-direction: column;
            align-items: center;
            
        }
    </style>
</head>
<body>
    <header>
        <h1>Conceits</h1>
    </header>

           <!-- Replace the answer-container div in the previous HTML with this: -->
<div class="game-container">
    <div class="info-container">
        <div class="info-box">Clue <span id="clue-number">1</span>/5</div>
        <div class="info-box">Score: <span id="score">0</span></div>
        <div class="info-box">Attempts: <span id="attempts-left">5</span></div>
    </div>

        <div class="clue-container" id="clue-container">
            <div class="clue-label">
                <span>Current Clue:</span>
                <span class="oeuvre-type" id="oeuvre-type">ðŸ“š</span>
            </div>
            <div class="clue-text" id="clue-text">He reached Q.</div>
        </div>

  
    <!-- New separate guess container -->
    <div class="guess-section">
    <div class="guess-label">Enter your guess:</div>
    <div class="guess-container">
        <div class="guess-row" id="row1">
            <!-- First row: TO THE (5 boxes) -->
        </div>
        <div class="guess-row" id="row2">
            <!-- Second row: LIGHTHOUSE (10 boxes) -->
        </div>
    </div>
    <button class="submit-button" id="submit-guess">Submit Guess</button>
</div>

    <div class="button-container">
        <button id="how-to-play-btn" class="action-button">How to Play</button>
        <button id="mode-toggle" class="action-button">EASY MODE</button>
        <button id="archive-btn" class="action-button">Archive</button>
    </div>
    
       <!-- How to Play Modal -->
    <div id="how-to-play-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>How to Play Conceits</h2>
            <div class="modal-body">
                <p><strong>Conceits</strong> is a cultural puzzle game that challenges you to identify famous works through eccentric clues.</p>
                
                <h3>Game Rules:</h3>
                <ol>
                    <li>You'll be presented with 5 clues, one at a time, increasing in helpfulness.</li>
                    <li>You have 5 attempts to guess the cultural work.</li>
                    <li>Score more points by guessing earlier:
                        <ul>
                            <li>Clue 1: 100 points</li>
                            <li>Clue 2: 80 points</li>
                            <li>Clue 3: 60 points</li>
                            <li>Clue 4: 40 points</li>
                            <li>Clue 5: 20 points</li>
                        </ul>
                    </li>
                    <li>The type of work (ðŸ“š Book, ðŸŽ¬ Film, etc.) is shown with the clue.</li>
                    <li>Enter your guess in the letter boxes - no spaces needed!</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- Archive Modal -->
    <div id="archive-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Puzzle Archive</h2>
            <div class="modal-body">
                <div id="archive-list">
                    <!-- Archive puzzles will be loaded here -->
                </div>
            </div>
        </div>
    </div>

<!-- Place this right before the closing </body> tag -->
<script>
document.addEventListener('DOMContentLoaded', () => {
    // Game state
    const state = {
        currentClue: 1,
        attempts: 5,
        score: 0,
        easyMode: false, // Add a flag for easy mode
        solution: {
            words: ['TOTHE', 'LIGHTHOUSE'],
            type: 'ðŸ“š'
        },
        clues: [
            'He reached Q.',
            'Who else felt sorry for the fish with a square hole in its side?',
            'The boeuf en daube was a success.',
            'The house fell apart.',
            'The painter is a flower and her subject framed by a window.'
        ]
    };

    const elements = {
        clueNumber: document.getElementById('clue-number'),
        score: document.getElementById('score'),
        attemptsLeft: document.getElementById('attempts-left'),
        clueContainer: document.getElementById('clue-container'),
        clueText: document.getElementById('clue-text'),
        oeuvreType: document.getElementById('oeuvre-type'),
        submitButton: document.getElementById('submit-guess'),
        howToPlayBtn: document.getElementById('how-to-play-btn'),
        archiveBtn: document.getElementById('archive-btn'),
        modals: document.querySelectorAll('.modal'),
        closeModals: document.querySelectorAll('.close-modal'),
        modeToggle: document.getElementById('mode-toggle') // We'll add this element
    };

    // Input handling functions
    function handleInput(e) {
        const input = e.target;
        input.value = input.value.toUpperCase();
        
        if (input.value.length === 1) {
            const nextInput = findNextInput(input);
            if (nextInput) nextInput.focus();
        }
    }

    function handleKeyDown(e) {
        if (e.key === 'Backspace' && e.target.value === '') {
            const prevInput = findPreviousInput(e.target);
            if (prevInput) {
                prevInput.focus();
                prevInput.value = '';
            }
        }
    }

    function findNextInput(currentInput) {
        const currentRow = currentInput.getAttribute('data-row');
        const currentIndex = parseInt(currentInput.getAttribute('data-index'));
        
        let nextInput;
        
        if (currentRow === '0' && currentIndex === 4) {
            // End of first row, move to second row
            nextInput = document.querySelector(`input[data-row="1"][data-index="0"]`);
        } else {
            // Move to next input in current row
            nextInput = document.querySelector(
                `input[data-row="${currentRow}"][data-index="${currentIndex + 1}"]`
            );
        }
        
        return nextInput;
    }

    function findPreviousInput(currentInput) {
        const currentRow = currentInput.getAttribute('data-row');
        const currentIndex = parseInt(currentInput.getAttribute('data-index'));
        
        let prevInput;
        
        if (currentRow === '1' && currentIndex === 0) {
            // Start of second row, move to end of first row
            prevInput = document.querySelector(`input[data-row="0"][data-index="4"]`);
        } else {
            // Move to previous input in current row
            prevInput = document.querySelector(
                `input[data-row="${currentRow}"][data-index="${currentIndex - 1}"]`
            );
        }
        
        return prevInput;
    }

    function createLetterInput(rowIndex, letterIndex) {
        const input = document.createElement('input');
        input.type = 'text';
        input.maxLength = 1;
        input.className = 'letter-input';
        input.setAttribute('data-row', rowIndex);
        input.setAttribute('data-index', letterIndex);
        
        // Add input event listeners
        input.addEventListener('input', handleInput);
        input.addEventListener('keydown', handleKeyDown);
        
        return input;
    }

    function createAnswerBoxes() {
        const row1 = document.getElementById('row1');
        const row2 = document.getElementById('row2');
        
        // Clear existing boxes
        row1.innerHTML = '';
        row2.innerHTML = '';
        
        // Create first row (TOTHE - 5 letters)
        for (let i = 0; i < 5; i++) {
            const input = createLetterInput(0, i);
            row1.appendChild(input);
        }
        
        // Create second row (LIGHTHOUSE - 10 letters)
        for (let i = 0; i < 10; i++) {
            const input = createLetterInput(1, i);
            row2.appendChild(input);
        }
    }

    function updateInfoDisplay() {
        elements.clueNumber.textContent = state.currentClue;
        elements.score.textContent = state.score;
        elements.attemptsLeft.textContent = state.attempts;
        elements.clueText.textContent = state.clues[state.currentClue - 1];
    }

    function showOeuvreType() {
        elements.oeuvreType.textContent = state.solution.type;
    }

    function checkGuess() {
        const inputs = document.querySelectorAll('.letter-input');
        let guess = '';
        inputs.forEach(input => guess += input.value);
        
        const solution = state.solution.words.join('');
        
        if (guess === solution) {
            // Calculate score based on current clue
            const points = Math.max(120 - (state.currentClue * 20), 20);
            state.score += points;
            gameWon();
        } else {
            state.attempts--;
            
            // In Easy Mode, keep correct letters
            if (state.easyMode) {
                preserveCorrectLetters(guess, solution);
            } else {
                // In Normal Mode, clear all inputs
                clearAllInputs();
            }
            
            if (state.attempts === 0) {
                gameLost();
            } else {
                showNextClue();
            }
        }
        
        updateInfoDisplay();
    }
    
    function preserveCorrectLetters(guess, solution) {
        const inputs = document.querySelectorAll('.letter-input');
        
        // Check each character position
        for (let i = 0; i < inputs.length; i++) {
            if (i < solution.length && guess[i] === solution[i]) {
                // Correct letter in correct position - keep it
                inputs[i].value = guess[i];
                inputs[i].classList.add('correct-letter'); // Optional: Add a CSS class for styling
                inputs[i].setAttribute('readonly', true); // Make it read-only
            } else if (inputs[i].getAttribute('readonly') !== 'true') {
                // Clear incorrect letters that aren't already marked as correct
                inputs[i].value = '';
            }
        }
    }
    
    function clearAllInputs() {
        const inputs = document.querySelectorAll('.letter-input');
        inputs.forEach(input => {
            input.value = '';
        });
    }

    function showNextClue() {
        if (state.currentClue < 5) {
            state.currentClue++;
            elements.clueContainer.classList.add('new-clue');
            setTimeout(() => {
                elements.clueContainer.classList.remove('new-clue');
            }, 1000);
            updateInfoDisplay();
        }
    }

    function gameWon() {
        alert(`Congratulations! You won with ${state.score} points!`);
        // Implement reset game functionality
    }

    function gameLost() {
        alert(`Game Over! The solution was: ${state.solution.words.join(' ')}`);
        // Implement reset game functionality
    }
    
    function toggleGameMode() {
        state.easyMode = !state.easyMode;
        
        // Update the button text
        const modeToggle = elements.modeToggle;
        if (modeToggle) {
            modeToggle.textContent = state.easyMode ? 'NORMAL MODE' : 'EASY MODE';
            
            // Reset the game when changing modes
            resetGame();
        }
    }
    
    function resetGame() {
        // Reset state
        state.currentClue = 1;
        state.attempts = 5;
        state.score = 0;
        
        // Clear all inputs and remove any 'correct' styling
        const inputs = document.querySelectorAll('.letter-input');
        inputs.forEach(input => {
            input.value = '';
            input.classList.remove('correct-letter');
            input.removeAttribute('readonly');
        });
        
        // Update display
        updateInfoDisplay();
    }

    function setupEventListeners() {
        elements.submitButton.addEventListener('click', checkGuess);
        
        // Mode toggle button
        if (elements.modeToggle) {
            elements.modeToggle.addEventListener('click', toggleGameMode);
        }
        
        // Modal handlers
        elements.howToPlayBtn.addEventListener('click', () => {
            document.getElementById('how-to-play-modal').style.display = 'flex';
        });
        
        elements.archiveBtn.addEventListener('click', () => {
            document.getElementById('archive-modal').style.display = 'flex';
        });
        
        elements.closeModals.forEach(button => {
            button.addEventListener('click', () => {
                button.closest('.modal').style.display = 'none';
            });
        });
        
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        });
    }

    function initializeGame() {
        createAnswerBoxes();
        updateInfoDisplay();
        setupEventListeners();
        showOeuvreType();
    }

    // Initialize the game
    initializeGame();
});
</script>

</body>

</html>
